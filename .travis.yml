---
sudo: required
dist: trusty
language: generic
python: "2.7"

env:
  - SITE=tests/test.yml

matrix:
  include:
    - env: ANSIBLE_VERSION=ppa:ansible/ansible
    - env: ANSIBLE_VERSION=ppa:ansible/ansible-1.9

before_install:
 - sudo apt-get update -qq
 - sudo apt-get -y install software-properties-common
 - sudo apt-add-repository -y $ANSIBLE_VERSION
 - sudo apt-get -y update
 - sudo apt-get -y install ansible
 - ansible --version

install:
 - echo localhost > inventory

script:
 # Check the role/playbook's syntax.
 - "ansible-playbook -i inventory $SITE --syntax-check"

 # Run the role/playbook with ansible-playbook.
 - "ansible-playbook -i inventory $SITE --connection=local --sudo"
